##########################
# LED Effects Animations #
##########################

# LED effect for busy (bright red pulse)
[led_effect led_busy]
autostart:false
frame_rate:24
leds:
    neopixel:my_led
layers:
     breathing 3 0 top (1,0,0)
    
# LED effect for cleaning (bright blue pulse)
[led_effect led_cleaning]
autostart: false
frame_rate:24
leds:
    neopixel:my_led
layers:
      breathing 3 1 top (0, 0, 1)

# LED effect for heating (rich orange pulse)
[led_effect led_heating]
autostart:false
frame_rate:24
leds:
    neopixel:my_led
layers:
      breathing 3 1 top (1, 0, 1)

# LED effect for homing (rich vibrant purple pulse)
[led_effect led_homing]
autostart:false
frame_rate:24
leds:
    neopixel:my_led
layers:
      breathing 3 1 top (, 1, 0)

######################
## Critical Error LED ##
######################

# LED effect for critical error (e.g., system failure)
[led_effect sb_critical_error]
leds:
    neopixel:my_led     # Target the neopixel LEDs
layers:
    strobe 1 1.5 add (1.0, 1.0, 1.0)   # White strobe effect for critical error
    breathing 2 0 difference (0.95, 0.0, 0.0)  # Red warning breathing effect
    static 1 0 top (1.0, 0.0, 0.0)  # Solid red static light for error
autostart: false
frame_rate: 24
run_on_error: true  # Triggered only when a critical error occurs

# LED effect for rainbow animation (optional)
[led_effect rainbow]
leds:
    neopixel:my_led
autostart: false  # Start automatically
frame_rate: 24  # Animation speed
layers:
    gradient 0.3 1 add (0.3, 0.0, 0.0), (0.0, 0.3, 0.0), (0.0, 0.0, 0.3)  # RGB gradient transition

#######################
# LED Effects Statics #
#######################

# Static LED effect for nozzle LEDs (turn off nozzle LEDs)
[led_effect set_nozzle_leds]
leds:
    neopixel:my_led     # Target the neopixel LEDs
autostart: false
frame_rate: 24
layers:
    static 0 0 top (0.0, 0.0, 0.0, 1.0)  # Static off effect for nozzle LEDs

# Static LED effect for general LEDs (turn on general LEDs with white light)
[led_effect set_led_leds]
leds:
    neopixel:my_led     # Target the neopixel LEDs
autostart: false
frame_rate: 24
layers:
    static 0 0 top (1.0, 0.8, 0.4)  # Static white light effect for general LEDs

##############
# The Macros #
##############

# Macro to turn off general LEDs
[gcode_macro LED_Off]
gcode:
    SET_LED_EFFECT EFFECT=set_led_leds STOP=1  # Stop the LED effect

# Macro to turn on general LEDs
[gcode_macro LED_On]
gcode:
    SET_LED_EFFECT EFFECT=set_led_leds  # Turn on the LED effect

# Macro to stop all LED effects
[gcode_macro LED_Effects_Off]
gcode:
    STOP_LED_EFFECTS  # Stop all active LED effects

# Macro to set LEDs to "busy" state (red)
[gcode_macro status_busy]
gcode:
    STOP_LED_EFFECTS  # Stop any active LED effects
    SET_LED_EFFECT EFFECT=led_busy  # Set the busy LED effect

# Macro to set LEDs to "heating" state (orange)
[gcode_macro status_heating]
gcode:
    STOP_LED_EFFECTS  # Stop any active LED effects
    SET_LED_EFFECT EFFECT=led_heating  # Heating effect

# Macro to set LEDs to "homing" state (yellow)
[gcode_macro status_homing]
gcode:
    STOP_LED_EFFECTS  # Stop any active LED effects
    SET_LED_EFFECT EFFECT=led_homing  # Homing effect

# Macro to set LEDs to "cleaning" state (teal)
[gcode_macro status_cleaning]
gcode:
    STOP_LED_EFFECTS  # Stop any active LED effects
    SET_LED_EFFECT EFFECT=led_cleaning  # Cleaning effect
